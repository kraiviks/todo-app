(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[5],{166:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return r}));var s={};n.r(s),n.d(s,"getTasksList",(function(){return _})),n.d(s,"getTaskById",(function(){return S}));var c={};n.r(c),n.d(c,"tasks",(function(){return s}));var o={};n.r(o),n.d(o,"taskSchema",(function(){return I})),n.d(o,"normalizeTask",(function(){return w})),n.d(o,"normalizeTasks",(function(){return F})),n.d(o,"tasksInitialState",(function(){return N})),n.d(o,"$tasks",(function(){return D})),n.d(o,"$queryConfig",(function(){return B})),n.d(o,"$tasksListLoading",(function(){return z})),n.d(o,"$taskDetailsLoading",(function(){return H})),n.d(o,"$tasksList",(function(){return J})),n.d(o,"$tasksFiltered",(function(){return G})),n.d(o,"$tasksListEmpty",(function(){return M})),n.d(o,"events",(function(){return P})),n.d(o,"effects",(function(){return Q})),n.d(o,"selectors",(function(){return R}));var r={};n.r(r),n.d(r,"getTaskStatus",(function(){return q}));var i=n(75),a=n(83),d=n(169),l=n.n(d),u=n(26);const j=t=>{let{data:e,titleHref:n,children:s,...c}=t;return e||c.loading?Object(u.jsxs)(a.b,{title:"Task#".concat(c.loading?"":null===e||void 0===e?void 0:e.id),className:l.a.root,...c,children:[n?Object(u.jsx)(i.b,{to:n,children:null===e||void 0===e?void 0:e.title}):null===e||void 0===e?void 0:e.title,s]}):null};var f=n(5),b=n.n(f),k=n(170),p=n.n(k);const O=t=>{let{data:e,before:n,titleHref:s}=t;const c=s?Object(u.jsx)(i.b,{to:s,children:e.title}):e.title;return Object(u.jsxs)(a.i,{className:b()(p.a.root,{[p.a.completed]:e.completed}),children:[n,c]})};var g=n(165),m=n(168),v=n(182),x=n(173),h=n.n(x),y=n(84);const L=h.a.create({baseURL:y.a}),T="/todos",_=t=>L.get(T,{params:t}),S=t=>{let{taskId:e,...n}=t;return L.get("".concat(T,"/").concat(e),{params:n})},E=Object(g.createEvent)(),$=Object(g.createEffect)((t=>c.tasks.getTasksList(t))),C=Object(g.createEffect)((t=>c.tasks.getTaskById(t))),I=new v.b.Entity("tasks"),w=t=>Object(v.a)(t,I),F=t=>Object(v.a)(t,[I]),N={},D=Object(g.createStore)(N).on($.doneData,((t,e)=>F(e.data).entities.tasks)).on(C.doneData,((t,e)=>({...t,...w(e.data).entities.tasks}))),B=Object(g.createStore)({}).on(E,((t,e)=>e)),z=$.pending,H=C.pending,J=Object(g.combine)(D,(t=>Object.values(t))),G=Object(g.combine)(J,B,((t,e)=>t.filter((t=>void 0===e.completed||t.completed===e.completed)))),M=G.map((t=>0===t.length)),P={setQueryConfig:E},Q={getTaskByIdFx:C,getTasksListFx:$},R={useTask:t=>Object(m.useStore)(D)[t]},q=t=>t.completed?"CLOSED":"OPENED"},169:function(t,e,n){t.exports={root:"styles_root__1Slir"}},170:function(t,e,n){t.exports={root:"styles_root__fGMdR",completed:"styles_completed__2aSOy"}},172:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var s=n(83),c=n(166),o=n(165),r=n(183);const i=Object(o.createEvent)();c.d.$tasks.on(i,((t,e)=>Object(r.a)(t,(t=>{const n=t[e];n.completed=!n.completed}))));const a={toggleTask:i};var d=n(26);const l=t=>{let{taskId:e,withStatus:n=!0}=t;const o=c.d.selectors.useTask(e);if(!o)return null;const r=c.c.getTaskStatus(o);return Object(d.jsx)(s.c,{onClick:()=>a.toggleTask(e),checked:o.completed,children:n&&r})}},204:function(t,e,n){t.exports={root:"styles_root__3vhW2",toolbar:"styles_toolbar__2OJM3",content:"styles_content__1K7j8"}},208:function(t,e,n){"use strict";n.r(e),n.d(e,"TasksListPage",(function(){return b}));var s=n(83),c=n(167),o=n(165),r=n(166);const i={1:{id:1,title:"All",config:{}},2:{id:2,title:"Opened",config:{completed:!1}},3:{id:3,title:"Closed",config:{completed:!0}}},a=Object.values(i);var d=n(26);const l=Object(c.reflect)({view:t=>{let{loading:e,onFilterClick:n}=t;return Object(d.jsx)(s.g.Group,{defaultValue:1,buttonStyle:"solid",children:a.map((t=>{let{title:c,id:o}=t;return Object(d.jsx)(s.g.Button,{onClick:()=>n((t=>i[t])(o).config),value:o,disabled:e,children:c},o)}))})},bind:{loading:r.d.$tasksListLoading,onFilterClick:r.d.events.setQueryConfig}});var u=n(172),j=n(204),f=n.n(j);const b=()=>Object(d.jsxs)(s.f,{className:f.a.root,children:[Object(d.jsxs)(s.f,{className:f.a.toolbar,children:[Object(d.jsx)(s.i,{justify:"center",children:Object(d.jsx)(s.k.Title,{level:1,children:"Tasks List"})}),Object(d.jsx)(s.i,{justify:"center",children:Object(d.jsx)(l,{})})]}),Object(d.jsx)(s.f.Content,{className:f.a.content,children:Object(d.jsx)(s.i,{gutter:[0,20],justify:"center",children:Object(d.jsx)(p,{})})})]}),k=Object(c.list)({view:t=>{let{task:e}=t;return Object(d.jsx)(s.d,{span:24,children:Object(d.jsx)(r.b,{data:e,titleHref:"/".concat(e.id),before:Object(d.jsx)(u.a,{taskId:e.id,withStatus:!1})})},e.id)},source:r.d.$tasksFiltered,bind:{},mapItem:{task:t=>t}}),p=Object(c.variant)({source:Object(o.combine)({isLoading:r.d.$tasksListLoading,isEmpty:r.d.$tasksListEmpty},(t=>{let{isLoading:e,isEmpty:n}=t;return e?"loading":n?"empty":"ready"})),cases:{loading:()=>Object(d.jsx)(s.j,{size:"large"}),empty:()=>Object(d.jsx)(s.e,{description:"No tasks found"}),ready:k},hooks:{mounted:r.d.effects.getTasksListFx.prepend((()=>{}))}})}}]);
//# sourceMappingURL=5.a4d38bab.chunk.js.map