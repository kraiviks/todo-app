(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[4],{166:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return o}));var s={};n.r(s),n.d(s,"getTasksList",(function(){return L})),n.d(s,"getTaskById",(function(){return S}));var a={};n.r(a),n.d(a,"tasks",(function(){return s}));var c={};n.r(c),n.d(c,"taskSchema",(function(){return D})),n.d(c,"normalizeTask",(function(){return N})),n.d(c,"normalizeTasks",(function(){return w})),n.d(c,"tasksInitialState",(function(){return B})),n.d(c,"$tasks",(function(){return C})),n.d(c,"$queryConfig",(function(){return F})),n.d(c,"$tasksListLoading",(function(){return z})),n.d(c,"$taskDetailsLoading",(function(){return q})),n.d(c,"$tasksList",(function(){return G})),n.d(c,"$tasksFiltered",(function(){return H})),n.d(c,"$tasksListEmpty",(function(){return J})),n.d(c,"events",(function(){return P})),n.d(c,"effects",(function(){return R})),n.d(c,"selectors",(function(){return A}));var o={};n.r(o),n.d(o,"getTaskStatus",(function(){return M}));var r=n(75),i=n(83),d=n(169),u=n.n(d),l=n(26);const f=t=>{let{data:e,titleHref:n,children:s,...a}=t;return e||a.loading?Object(l.jsxs)(i.b,{title:"Task#".concat(a.loading?"":null===e||void 0===e?void 0:e.id),className:u.a.root,...a,children:[n?Object(l.jsx)(r.b,{to:n,children:null===e||void 0===e?void 0:e.title}):null===e||void 0===e?void 0:e.title,s]}):null};var k=n(5),b=n.n(k),j=n(170),g=n.n(j);const p=t=>{let{data:e,before:n,titleHref:s}=t;const a=s?Object(l.jsx)(r.b,{to:s,children:e.title}):e.title;return Object(l.jsxs)(i.i,{className:b()(g.a.root,{[g.a.completed]:e.completed}),children:[n,a]})};var O=n(165),m=n(168),h=n(182),v=n(173),x=n.n(v),T=n(84);const y=x.a.create({baseURL:T.a}),_="/todos",L=t=>y.get(_,{params:t}),S=t=>{let{taskId:e,...n}=t;return y.get("".concat(_,"/").concat(e),{params:n})},I=Object(O.createEvent)(),E=Object(O.createEffect)((t=>a.tasks.getTasksList(t))),$=Object(O.createEffect)((t=>a.tasks.getTaskById(t))),D=new h.b.Entity("tasks"),N=t=>Object(h.a)(t,D),w=t=>Object(h.a)(t,[D]),B={},C=Object(O.createStore)(B).on(E.doneData,((t,e)=>w(e.data).entities.tasks)).on($.doneData,((t,e)=>({...t,...N(e.data).entities.tasks}))),F=Object(O.createStore)({}).on(I,((t,e)=>e)),z=E.pending,q=$.pending,G=Object(O.combine)(C,(t=>Object.values(t))),H=Object(O.combine)(G,F,((t,e)=>t.filter((t=>void 0===e.completed||t.completed===e.completed)))),J=H.map((t=>0===t.length)),P={setQueryConfig:I},R={getTaskByIdFx:$,getTasksListFx:E},A={useTask:t=>Object(m.useStore)(C)[t]},M=t=>t.completed?"CLOSED":"OPENED"},169:function(t,e,n){t.exports={root:"styles_root__1Slir"}},170:function(t,e,n){t.exports={root:"styles_root__fGMdR",completed:"styles_completed__2aSOy"}},172:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var s=n(83),a=n(166),c=n(165),o=n(183);const r=Object(c.createEvent)();a.d.$tasks.on(r,((t,e)=>Object(o.a)(t,(t=>{const n=t[e];n.completed=!n.completed}))));const i={toggleTask:r};var d=n(26);const u=t=>{let{taskId:e,withStatus:n=!0}=t;const c=a.d.selectors.useTask(e);if(!c)return null;const o=a.c.getTaskStatus(c);return Object(d.jsx)(s.c,{onClick:()=>i.toggleTask(e),checked:c.completed,children:n&&o})}},205:function(t,e,n){t.exports={root:"styles_root__1aFqh",content:"styles_content__3IC4G",card:"styles_card__hyz1A"}},206:function(t,e,n){"use strict";n.r(e),n.d(e,"TaskDetailsPage",(function(){return f}));var s=n(0),a=n(75),c=n(83),o=n(167),r=n(172),i=n(166),d=n(205),u=n.n(d),l=n(26);const f=Object(o.reflect)({view:t=>{let{match:e,isLoading:n}=t;const o=Number(null===e||void 0===e?void 0:e.params.taskId),d=i.d.selectors.useTask(o);return Object(s.useEffect)((()=>{i.d.effects.getTaskByIdFx({taskId:o})}),[o]),d||n?Object(l.jsx)(c.f,{className:u.a.root,children:Object(l.jsx)(c.f.Content,{className:u.a.content,children:Object(l.jsx)(i.a,{data:d,size:"default",loading:n,className:u.a.card,bodyStyle:{height:400},extra:Object(l.jsx)(a.b,{to:"/",children:"Back to TasksList"}),actions:[Object(l.jsx)(r.a,{taskId:o},"toggle")]})})}):Object(l.jsx)(c.h,{status:"404",title:"404",subTitle:"Task was not found",extra:Object(l.jsx)(a.b,{to:"/",children:Object(l.jsxs)(c.a,{type:"primary",children:["Back to tasks list",o]})})})},bind:{isLoading:i.d.$taskDetailsLoading}})}}]);
//# sourceMappingURL=4.0715ceb2.chunk.js.map